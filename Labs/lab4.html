<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../styles.css" />
    <title>Lab 4</title>
  </head>
  <body>
    <header>
      <h1>Fast Robots - Austin Townsend</h1>
      <nav>
        <ul>
          <li><a href="https://austintownsend.github.io/Fast-Robots-Austin/index.html">Home</a></li>
          <li><a href="lab1A.html">Lab 1A</a></li>
          <li><a href="lab1B.html">Lab 1B</a></li>
          <li><a href="lab2.html">Lab 2</a></li>
          <li><a href="lab3.html">Lab 3</a></li>
          <li><a href="lab4.html">Lab 4</a></li>
        </ul>
      </nav>
    </header>

    <section class="content">
      <h2>Lab 4</h2>

      <p>
        The purpose of this lab is to convert the RC car from manual to open loop
        control. We will be soldering motor drivers, and inserting all necessary
        components into the chassis of the RC car. Finally, we will use PWM signals
        to show that the RC car has open loop control.
      </p>

      <h3>Prelab</h3>

      <p>
        Before any soldering can be conducted, it is important to decide which pins
        will be used for the motor drivers. Each motor requires two pins (one for
        forward control and one for backward control). I chose pins 9 and 11 for
        the right motor and pins 12 and 13 for the left motor These were chosen by
        looking at the Artemis datasheet to avoid any pins that are not used for
        PWM control. Inside the vehicle, it is best to keep the motor drivers
        away from the Artemis to reduce EMI. The solder connections and pin initializations
        are shown in the images below. The blue wire and solder bridge are connected
        to the DC motor, whereas the purple wire and solder bridge are connected
        to two PWM pins on the Artemis. The power comes from a 650mAh battery,
        and the motor driver is also connected to a ground pin on the Artemis.
      </p>

      <img src="SOLDER MOTOR DRIVER.png" alt="soldering connections" width="500" />
      <img src="LAB 5 PINS.png" alt="pin initializations" width="400" />

      <p>
        The motor drivers require more power than the artemis, so we will connect
        the 850mAh battery to the motor drivers and use the 650mAh battery for the
        Artemis. We cannot use the same battery because the large changes in current
        can damage the Artemis and cause issues during the open loop control.
      </p>

      <h3>Dual Motor Drivers (Power Supply)</h3>

      <p>
        The motor drivers are first connected to the power supply, which can be
        more useful than using batteries. The batteries lose charge relatively
        quick, and the power supply will be able to supply a more consistent input
        voltage. The power supply was set to around 3.7 volts, which is the same
        voltage output as the 850mAh battery that we will use to power our motor
        drivers later in the lab. The setup for this is shown below.
      </p>

      <img src="RIGHT PULSE SETUP.png" alt="Osc right motor" width="500" />

      <p>
        I used basic analogWrite commands to move the right and left motors separately
        for different trials. I tested the right motor first, setting one of its pins
        high at 150, and then its other pin and the two left motor pins low at 0.
        Then, in the loop, quickly switching the high motor pin between 150 and 0,
        showing a pulsing pattern on the oscilloscope. This can be seen in the
        image below where Channel 1, the yellow line, illustrates the voltage
        input based on the PWM signal. The code to run this is also shown below.
      </p>

      <img src="OSC RIGHT PULSE.png" alt="Osc right motor" width="500" />
      <img src="PULSE CODE.png" alt="code to run motor" width="400" />

      <h3>Dual Motor Drivers (Battery Power)</h3>

      <p>

      </p>

      <img src="SCANNING I2C.png" alt="Scan I2C" width="400" />

      <h3>Final Component Setup</h3>

      <p>

      </p>

      <img src="DATA POINTS.png" alt="Data Points" width="500" />
      <img src="DISTANCE TOF SETUP.png" alt="Distance TOF Setup" width="500" />

      <h3>Lower Limit PWM</h3>

      <p>

      </p>

      <img src="TWO TOF DATA.png" alt="Two TOF Data" width="350" />

      <h3>Straight Line Test</h3>

      <p>

      </p>

      <img src="TOF CODE.png" alt="TOF CoDE" width="600" />

      <h3>Open Loop Test</h3>

      <p>

      </p>

      <img src="TOF PLOT TIME.png" alt="TOF plot time" width="500" />
      <img src="TOF CODE.png" alt="TOF CoDE" width="600" />

      <h3>Additional Task: AnalogWrite Frequency Discussion</h3>

      <p>

      </p>

      <h3>Additional Task: Lower Limit PWM in Motion</h3>

      <p>

      </p>

      <h3>Lab 4 Takeaways</h3>

      <p>

      </p>

    </section>
  </body>
</html>
